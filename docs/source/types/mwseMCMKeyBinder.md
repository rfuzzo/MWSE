# mwseMCMKeyBinder
<div class="search_terms" style="display: none">mwsemcmkeybinder</div>

<!---
	This file is autogenerated. Do not edit this file manually. Your changes will be ignored.
	More information: https://github.com/MWSE/MWSE/tree/master/docs
-->

This button allows the player to bind a key combination for use with hotkeys. The binder allows specifying if mouse buttons and scroll wheel bindings are allowed and wether modifier keys Shift, Alt and Ctrl are allowed.

When the player presses the button with current hotkey, a prompt asks them to press a new key (or key combination using Shift, Ctrl or Alt) to bind.

If this KeyBinder is set to only accept keyboard keys, key combos are stored in the following format ([mwseKeyCombo](../types/mwseKeyCombo.md)):

```lua linenums="1"
{
	keyCode = tes3.scanCode.{key},
	isShiftDown = true,
	isAltDown = false,
	isControlDown = false,
},
```

On the other hand, if the KeyBinder allows binding mouse keys in addition to keyboard keys, key combos are stored in the following format([mwseKeyMouseCombo](../types/mwseKeyMouseCombo.md)):

```lua linenums="1"
{
	keyCode = tes3.scanCode.{key},
	isShiftDown = true,
	isAltDown = false,
	isControlDown = false,
	mouseWheel = -1 - down, 1 - up, nil
	mouseButton = number|nil
},
```


This type inherits the following: [mwseMCMButton](../types/mwseMCMButton.md), [mwseMCMSetting](../types/mwseMCMSetting.md), [mwseMCMComponent](../types/mwseMCMComponent.md)
??? example "Example: Filtering out key presses that aren't equal to the bound key combination"

	```lua
	
	-- An example of a simple configuration setup
	local defaultConfig = {
		---@type mwseKeyMouseCombo
		combo = {
			-- Alt + Left mouse button
			mouseButton = 0,
			isAltDown = true,
			isControlDown = false,
			isShiftDown = false,
		},
	}
	local config = mwse.loadConfig("myModConfig", defaultConfig)
	
	local function registerModConfig()
		local template = mwse.mcm.createTemplate({ name = "Test Mod" })
		template:register()
	
		local page = template:createSideBarPage({ label = "Settings" })
	
		page:createKeyBinder({
			label = "My combo",
			description = "This combo does...",
			allowMouse = true,
			variable = mwse.mcm.createTableVariable({
				id = "combo",
				table = config
			}),
		})
	end
	event.register(tes3.event.modConfigReady, registerModConfig)
	
	
	--- @param e keyDownEventData|mouseButtonDownEventData|mouseWheelEventData
	local function sayHi(e)
		if not tes3.isKeyEqual({ expected = config.combo, actual = e }) then
			-- Nothing to do if the pressed combination isn't equal to our expected combination.
			return
		end
	
		-- Now do our logic
		tes3.messageBox("Hi!")
	end
	
	event.register(tes3.event.keyDown, sayHi)
	event.register(tes3.event.mouseButtonDown, sayHi)
	event.register(tes3.event.mouseWheel, sayHi)

	```

## Properties

### `allowCombinations`
<div class="search_terms" style="display: none">allowcombinations</div>

If true, the keybinder will let the user use modification keys: Shift, Ctrl, and Alt when rebinding.

**Returns**:

* `result` (boolean)

***

### `allowMouse`
<div class="search_terms" style="display: none">allowmouse</div>

If true, the keybinder will let the user use mouse buttons and scroll wheel in this keybinder.

**Returns**:

* `result` (boolean)

***

### `buttonText`
<div class="search_terms" style="display: none">buttontext</div>

The text shown on the button.

**Returns**:

* `result` (string)

***

### `callback`
<div class="search_terms" style="display: none">callback</div>

The custom function called when the player interacts with this Setting.

**Returns**:

* `result` (nil, fun(self: [mwseMCMSetting](../types/mwseMCMSetting.md)))

***

### `childIndent`
<div class="search_terms" style="display: none">childindent</div>

The left padding size in pixels. Used on all the child components.

**Returns**:

* `result` (integer, nil)

***

### `childSpacing`
<div class="search_terms" style="display: none">childspacing</div>

The bottom border size in pixels. Used on all the child components.

**Returns**:

* `result` (integer, nil)

***

### `class`
<div class="search_terms" style="display: none">class</div>

Every MCM component has a unique string indentifier specific to that component. These strings are the filename of the file implementing a component. These are found in `core\\mcm\\components`.

**Returns**:

* `result` (string)

***

### `componentType`
<div class="search_terms" style="display: none">componenttype</div>

The type of this component.

**Returns**:

* `result` ("Setting")

***

### `createContentsContainer`
<div class="search_terms" style="display: none">createcontentscontainer, contentscontainer</div>

This method creates the contents of a component. Not every component implements this method.

**Returns**:

* `result` (nil, fun(self: [mwseMCMComponent](../types/mwseMCMComponent.md), outerContainer: [tes3uiElement](../types/tes3uiElement.md)))

***

### `description`
<div class="search_terms" style="display: none">description</div>

If in a [Sidebar Page](./mwseMCMSideBarPage.md), the description will be shown on mouseover.

**Returns**:

* `result` (string, nil)

***

### `disabledText`
<div class="search_terms" style="display: none">disabledtext, dtext</div>

This text is shown on the button if the `buttonText` isn't set.

**Returns**:

* `result` (string)

***

### `elements`
<div class="search_terms" style="display: none">elements</div>

This dictionary-style table holds all the UI elements of the Button, for easy access.

**Returns**:

* `result` ([mwseMCMButtonElements](../types/mwseMCMButtonElements.md))

***

### `indent`
<div class="search_terms" style="display: none">indent</div>

The left padding size in pixels. Only used if the `childIndent` isn't set on the parent component.

**Returns**:

* `result` (integer)

***

### `inGameOnly`
<div class="search_terms" style="display: none">ingameonly</div>

Used only on components without a variable. For components with a variable, the variable's `inGameOnly` field is used. For more info see [checkDisabled](./mwseMCMComponent.md#checkdisabled).

**Returns**:

* `result` (boolean)

***

### `inGameOnly `
<div class="search_terms" style="display: none">ingameonly </div>

If true, the setting is disabled while the game is on main menu.

**Returns**:

* `result` (boolean)

***

### `keybindName`
<div class="search_terms" style="display: none">keybindname</div>

The keybind name. Shown in the popup menu header. This string is formatted into a localized version of "SET %s KEYBIND.". If none is provided the popup has "SET NEW KEYBIND." as header text.

**Returns**:

* `result` (string, nil)

***

### `label`
<div class="search_terms" style="display: none">label</div>

The text shown next to the button.

**Returns**:

* `result` (string)

***

### `leftSide`
<div class="search_terms" style="display: none">leftside</div>

If true, the Button is created on the left, while the label text is created on the right. If false, label text is on the left.

**Returns**:

* `result` (boolean)

***

### `makeComponent`
<div class="search_terms" style="display: none">makecomponent</div>

This method must be implemented by child classes of mwseMCMSetting.

**Returns**:

* `result` (nil, fun(self: [mwseMCMSetting](../types/mwseMCMSetting.md), innerContainer: [tes3uiElement](../types/tes3uiElement.md)))

***

### `mouseOvers`
<div class="search_terms" style="display: none">mouseovers</div>

This array of UI elements will have an event handler registered to trigger "MCM:MouseOver" event. For more info, see [registerMouseOverElements](#registermouseoverelements) method.

**Returns**:

* `result` ([tes3uiElement](../types/tes3uiElement.md)[], nil)

***

### `paddingBottom`
<div class="search_terms" style="display: none">paddingbottom</div>

The bottom border size in pixels. Only used if the `childSpacing` is unset on the parent component.

**Returns**:

* `result` (integer)

***

### `parentComponent`
<div class="search_terms" style="display: none">parentcomponent</div>



**Returns**:

* `result` ([mwseMCMComponent](../types/mwseMCMComponent.md), nil)

***

### `postCreate`
<div class="search_terms" style="display: none">postcreate</div>

Custom formatting function to make adjustments to any element saved in `self.elements`.

**Returns**:

* `result` (nil, fun(self: [mwseMCMComponent](../types/mwseMCMComponent.md)))

***

### `restartRequired`
<div class="search_terms" style="display: none">restartrequired</div>

If true, updating this Setting will notify the player to restart the game.

**Returns**:

* `result` (boolean)

***

### `restartRequiredMessage`
<div class="search_terms" style="display: none">restartrequiredmessage</div>

The message shown if restartRequired is triggered. The default text is a localized version of: "The game must be restarted before this change will come into effect.".

**Returns**:

* `result` (string)

***

### `sCancel`
<div class="search_terms" style="display: none">scancel</div>

Set to the value of `sCancel` GMST.

**Returns**:

* `result` (string)

***

### `sNo`
<div class="search_terms" style="display: none">sno</div>

Set to the value of `sNo` GMST.

**Returns**:

* `result` (string)

***

### `sOK`
<div class="search_terms" style="display: none">sok</div>

Set to the value of `sOK` GMST.

**Returns**:

* `result` (string)

***

### `sYes`
<div class="search_terms" style="display: none">syes</div>

Set to the value of `sYes` GMST.

**Returns**:

* `result` (string)

***

### `variable`
<div class="search_terms" style="display: none">variable</div>

The Variable this setting will update.

**Returns**:

* `result` ([mwseMCMVariable](../types/mwseMCMVariable.md), nil)

***

## Methods

### `checkDisabled`
<div class="search_terms" style="display: none">checkdisabled</div>

Returns true if the component should be disabled.

Componets with a variable:

- True if the Component's **variable** has `inGameOnly` field set to true, and the game is on the main menu. For components with multiple subcomponent ([Category](./mwseMCMCategory.md)), the check is done for each subcomponent.

Components without a variable:

- True if the **Component's** `inGameOnly` field is set to true, and the game is on the main menu.


```lua
local result = myObject:checkDisabled()
```

**Returns**:

* `result` (boolean)

***

### `create`
<div class="search_terms" style="display: none">create</div>

This method creates the UI elements that comprise this Setting.

```lua
myObject:create(parentBlock)
```

**Parameters**:

* `parentBlock` ([tes3uiElement](../types/tes3uiElement.md))

***

### `createContentsContainer`
<div class="search_terms" style="display: none">createcontentscontainer, contentscontainer</div>

This method creates the Button's button and label UI elements.

```lua
myObject:createContentsContainer(parentBlock)
```

**Parameters**:

* `parentBlock` ([tes3uiElement](../types/tes3uiElement.md))

***

### `createInnerContainer`
<div class="search_terms" style="display: none">createinnercontainer, innercontainer</div>

Creates component's innerContainer UI element inside given `parentBlock`, and stores it in the `self.elements.innerContainer`. The innerContainer will add `self.indent` additional padding on the left if the component has a label.

```lua
myObject:createInnerContainer(parentBlock)
```

**Parameters**:

* `parentBlock` ([tes3uiElement](../types/tes3uiElement.md))

***

### `createLabel`
<div class="search_terms" style="display: none">createlabel, label</div>

Creates component's label UI element.

First, it calls `self:createLabelBlock` and creates the label element inside new `labelBlock`. Stores both new UI elements in the `self.elements` and `self.mouseOvers`.

```lua
myObject:createLabel(parentBlock)
```

**Parameters**:

* `parentBlock` ([tes3uiElement](../types/tes3uiElement.md))

***

### `createLabelBlock`
<div class="search_terms" style="display: none">createlabelblock, labelblock</div>

Creates component's labelBlock UI element inside given `parentBlock`, and stores it in the `self.elements.labelBlock` and `self.mouseOvers`.

```lua
myObject:createLabelBlock(parentBlock)
```

**Parameters**:

* `parentBlock` ([tes3uiElement](../types/tes3uiElement.md))

***

### `createOuterContainer`
<div class="search_terms" style="display: none">createoutercontainer, outercontainer</div>

Creates component's outerContainer UI element inside given `parentBlock`, and stores it in the `self.elements.outerContainer` and `self.mouseOvers`. The outerContainer holds all the other UI elements that comprise a component.

```lua
myObject:createOuterContainer(parentBlock)
```

**Parameters**:

* `parentBlock` ([tes3uiElement](../types/tes3uiElement.md))

***

### `createPopupMenu`
<div class="search_terms" style="display: none">createpopupmenu, popupmenu</div>

Creates the popup menu.

```lua
local menu = myObject:createPopupMenu()
```

**Returns**:

* `menu` ([tes3uiElement](../types/tes3uiElement.md))

***

### `disable`
<div class="search_terms" style="display: none">disable</div>

This method disables the component's UI elements. That includes: changing the color of the UI elements to the `tes3.palette.disabledColor` and setting button widget state to `tes3.uiState.disabled`.

```lua
myObject:disable()
```

***

### `enable`
<div class="search_terms" style="display: none">enable</div>

Enables the component's UI elements. That includes: changing the color of the UI elements to the `tes3.palette.normalColor` and registering handlers for `tes3.uiEvent.mouseClick` for buttons.

```lua
myObject:enable()
```

***

### `getComboString`
<div class="search_terms" style="display: none">getcombostring, combostring</div>

Returns a string representing given `keyCombo`. For example, "Ctrl - C".

```lua
local result = myObject:getComboString(keyCombo)
```

**Parameters**:

* `keyCombo` ([mwseKeyMouseCombo](../types/mwseKeyMouseCombo.md))

**Returns**:

* `result` (string)

***

### `getComponent`
<div class="search_terms" style="display: none">getcomponent, component</div>

Creates a new Component of given class or returns the given Component.

```lua
local component = myObject:getComponent({ class = ..., label = ..., indent = ..., childIndent = ..., paddingBottom = ..., childSpacing = ..., inGameOnly = ..., postCreate = ..., parentComponent = ... })
```

**Parameters**:

* `componentData` ([mwseMCMComponent](../types/mwseMCMComponent.md), table)
	* `class` (string): The component type to get. On of the following:
		- `"Template"`
		- `"ExclusionsPage"`
		- `"FilterPage"`
		- `"MouseOverPage"`
		- `"Page"`
		- `"SideBarPage"`
		- `"Category"`
		- `"SideBySideBlock"`
		- `"ActiveInfo"`
		- `"Hyperlink"`
		- `"Info"`
		- `"MouseOverInfo"`
		- `"Setting"`
		- `"Button"`
		- `"OnOffButton"`
		- `"YesNoButton"`
		- `"CycleButton"`
		- `"KeyBinder"`
		- `"Dropdown"`
		- `"TextField"`
		- `"ParagraphField"`
		- `"Slider"`
		- `"DecimalSlider"`
		- `"PercentageSlider"`
	* `label` (string): *Optional*. The label text to set for the new component. Not all component types have a label.
	* `indent` (integer): *Default*: `12`. The left padding size in pixels. Only used if the `childIndent` isn't set on the parent component.
	* `childIndent` (integer): *Optional*. The left padding size in pixels. Used on all the child components.
	* `paddingBottom` (integer): *Default*: `4`. The bottom border size in pixels. Only used if the `childSpacing` is unset on the parent component.
	* `childSpacing` (integer): *Optional*. The bottom border size in pixels. Used on all the child components.
	* `inGameOnly` (boolean): *Default*: `false`.
	* `postCreate` (fun(self: [mwseMCMComponent](../types/mwseMCMComponent.md))): *Optional*. Can define a custom formatting function to make adjustments to any element saved in `self.elements`.
	* `parentComponent` ([mwseMCMComponent](../types/mwseMCMComponent.md)): *Optional*.

**Returns**:

* `component` ([mwseMCMComponent](../types/mwseMCMComponent.md))

***

### `getLetter`
<div class="search_terms" style="display: none">getletter, letter</div>

Returns the letter the provided `keyCode` represents.

```lua
local letter = myObject:getLetter(keyCode)
```

**Parameters**:

* `keyCode` (integer, nil)

**Returns**:

* `letter` (string, nil)

***

### `getMouseButtonText`
<div class="search_terms" style="display: none">getmousebuttontext, mousebuttontext</div>

Returns a localized name for the mouse button of given index.

```lua
local result = myObject:getMouseButtonText(buttonIndex)
```

**Parameters**:

* `buttonIndex` (number, nil)

**Returns**:

* `result` (string, nil)

***

### `getMouseWheelText`
<div class="search_terms" style="display: none">getmousewheeltext, mousewheeltext</div>

Returns a localized version of `"Mouse wheel up"` if `wheel` is 1 and `"Mouse wheel down"` if `wheel` is -1.

```lua
local result = myObject:getMouseWheelText(wheel)
```

**Parameters**:

* `wheel` (integer, nil)

**Returns**:

* `result` (string, nil)

***

### `getText`
<div class="search_terms" style="display: none">gettext, text</div>

Returns a string representing the key combo currently store in `variable`. For example, "Ctrl - C".

```lua
local result = myObject:getText()
```

**Returns**:

* `result` (string)

***

### `insertMouseovers`
<div class="search_terms" style="display: none">insertmouseovers</div>

Recursively walks over children of given `element` and inserts them into `self.mouseOvers`.

```lua
myObject:insertMouseovers(element)
```

**Parameters**:

* `element` ([tes3uiElement](../types/tes3uiElement.md))

***

### `keySelected`
<div class="search_terms" style="display: none">keyselected</div>

Changes the `variable.value` to the key combination from given input event data.

```lua
myObject:keySelected(e)
```

**Parameters**:

* `e` (keyUpEventData, mouseButtonDownEventData, mouseWheelEventData)

***

### `makeComponent`
<div class="search_terms" style="display: none">makecomponent</div>

This method creates the Button's button UI element and stores it in `self.elements.button` and `self.mouseOvers`.

```lua
myObject:makeComponent(parentBlock)
```

**Parameters**:

* `parentBlock` ([tes3uiElement](../types/tes3uiElement.md))

***

### `new`
<div class="search_terms" style="display: none">new</div>

Creates a new KeyBinder.

```lua
local button = myObject:new({ label = ..., description = ..., allowCombinations  = ..., allowMouse  = ..., keybindName = ..., leftSide  = ..., variable = ..., defaultSetting = ..., callback = ..., inGameOnly = ..., restartRequired = ..., restartRequiredMessage = ..., indent = ..., childIndent = ..., paddingBottom = ..., childSpacing = ..., postCreate = ..., class = ..., componentType = ..., parentComponent = ... })
```

**Parameters**:

* `data` (table): *Optional*.
	* `label` (string): *Optional*. Text shown next to the button.
	* `description` (string): *Optional*. If in a [Sidebar Page](../types/mwseMCMSideBarPage.md), the description will be shown on mouseover.
	* `allowCombinations ` (boolean): *Default*: `true`. If true, the keybinder will let the user use modification keys: Shift, Ctrl, and Alt when rebinding.
	* `allowMouse ` (boolean): *Default*: `false`. If true, the keybinder will let the user use mouse buttons and scroll wheel in this keybinder. In that case the variable will have [mwseKeyMouseCombo](../types/mwseKeyMouseCombo.md) layout, [mwseKeyCombo](../types/mwseKeyCombo.md) otherwise.
	* `keybindName` (string): *Optional*. The keybind name. Shown in the popup menu header. This string is formatted into a localized version of "SET %s KEYBIND.". If none is provided the popup has "SET NEW KEYBIND." as header text.
	* `leftSide ` (boolean): *Default*: `true`. If true, the button will be created on the left and label on the right.
	* `variable` ([mwseMCMVariable](../types/mwseMCMVariable.md), [mwseMCMSettingNewVariable](../types/mwseMCMSettingNewVariable.md)): *Optional*. A variable for this KeyBinder.
	* `defaultSetting` ([mwseKeyCombo](../types/mwseKeyCombo.md)): *Optional*. If `defaultSetting` wasn't passed in the `variable` table, can be passed here. The new variable will be initialized to this value.
	* `callback` (fun(self: [mwseMCMKeyBinder](../types/mwseMCMKeyBinder.md))): *Optional*. The custom function called when the player interacts with this KeyBinder.
	* `inGameOnly` (boolean): *Default*: `false`. If true, the setting is disabled while the game is on main menu.
	* `restartRequired` (boolean): *Default*: `false`. If true, updating this Setting will notify the player to restart the game.
	* `restartRequiredMessage` (string): *Optional*. The message shown if restartRequired is triggered. The default text is a localized version of: "The game must be restarted before this change will come into effect."
	* `indent` (integer): *Default*: `12`. The left padding size in pixels. Only used if the `childIndent` isn't set on the parent component.
	* `childIndent` (integer): *Optional*. The left padding size in pixels. Used on all the child components.
	* `paddingBottom` (integer): *Default*: `4`. The bottom border size in pixels. Only used if the `childSpacing` is unset on the parent component.
	* `childSpacing` (integer): *Optional*. The bottom border size in pixels. Used on all the child components.
	* `postCreate` (fun(self: [mwseMCMKeyBinder](../types/mwseMCMKeyBinder.md))): *Optional*. Can define a custom formatting function to make adjustments to any element saved in `self.elements`.
	* `class` (string): *Optional*.
	* `componentType` (string): *Optional*.
	* `parentComponent` ([mwseMCMComponent](../types/mwseMCMComponent.md)): *Optional*.

**Returns**:

* `button` ([mwseMCMKeyBinder](../types/mwseMCMKeyBinder.md))

***

### `prepareData`
<div class="search_terms" style="display: none">preparedata</div>

Prepares the provided parameters table and sets the `parentComponent` field to `mwseMCMComponent`.

```lua
local data = myObject:prepareData(data)
```

**Parameters**:

* `data` (string, mwseMCMComponent.new.data): *Optional*.

**Returns**:

* `data` (mwseMCMComponent.new.data)

***

### `press`
<div class="search_terms" style="display: none">press</div>

Calls `showKeyBindMessage` method.

```lua
myObject:press()
```

***

### `printComponent`
<div class="search_terms" style="display: none">printcomponent</div>

Prints the component table to the `mwse.log`. If a component is passed, it will be printed. If called without arguments, the component it was called on will be printed.

```lua
myObject:printComponent(component)
```

**Parameters**:

* `component` (table): *Default*: `self`.

***

### `registerMouseOverElements`
<div class="search_terms" style="display: none">registermouseoverelements</div>

Registers an event handler on each given UI element for the `tes3.uiEvent.mouseOver` and `tes3.uiEvent.mouseLeave` that will trigger "MCM:MouseOver" event. That event is used by the MCM to update the sidebar on the [mwseMCMSideBarPage](https://mwse.github.io/MWSE/types/mwseMCMSideBarPage/).

```lua
myObject:registerMouseOverElements(mouseOverList)
```

**Parameters**:

* `mouseOverList` ([tes3uiElement](../types/tes3uiElement.md)[]): *Optional*. If this argument isn't passed, does nothing.

***

### `setText`
<div class="search_terms" style="display: none">settext, text</div>

Sets the text on the mwseMCMButton's button UI Element.

```lua
myObject:setText(newText)
```

**Parameters**:

* `newText` (string)

***

### `showKeyBindMessage`
<div class="search_terms" style="display: none">showkeybindmessage, keybindmessage</div>

Shows the rebind prompt popup. The popup is active until some valid input is given.

```lua
myObject:showKeyBindMessage()
```

***

### `update`
<div class="search_terms" style="display: none">update</div>

Sets the button UI element text to `self.buttonText`. Calls the Button's callback method and if `restartRequired` is set to true, notifies the player to restart the game.

```lua
myObject:update()
```

