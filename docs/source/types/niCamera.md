# niCamera
<div class="search_terms" style="display: none">nicamera, camera</div>

<!---
	This file is autogenerated. Do not edit this file manually. Your changes will be ignored.
	More information: https://github.com/MWSE/MWSE/tree/master/docs
-->

Object that represent a camera. Position and orientation is determined by parent properties. This enables the cameras to be attached to scene graph objects and follow them automatically, as they move.

This type inherits the following: [niAVObject](../types/niAVObject.md), [niObjectNET](../types/niObjectNET.md), [niObject](../types/niObject.md)
## Properties

### `alphaProperty`
<div class="search_terms" style="display: none">alphaproperty</div>

Convenient access to this object's alpha property. Setting this value to be nil will erase the property, while setting it to a valid alpha property will set (or replace) it.

**Returns**:

* `result` ([niAlphaProperty](../types/niAlphaProperty.md), nil)

***

### `appCulled`
<div class="search_terms" style="display: none">appculled</div>

A flag indicating if this object is culled. When culled, it will not render, and raycasts ignore it.

**Returns**:

* `result` (boolean)

***

### `controller`
<div class="search_terms" style="display: none">controller</div>

*Read-only*. The first controller available on the object.

**Returns**:

* `result` ([niTimeController](../types/niTimeController.md))

***

### `cullingPlanes`
<div class="search_terms" style="display: none">cullingplanes</div>

The culling planes of the camera: near, far, left, right, top, and bottom.

**Returns**:

* `result` ([tes3vector4](../types/tes3vector4.md)[])

***

### `extraData`
<div class="search_terms" style="display: none">extradata</div>

*Read-only*. The first extra data available on the object.

**Returns**:

* `result` ([niExtraData](../types/niExtraData.md))

***

### `flags`
<div class="search_terms" style="display: none">flags</div>

Flags, dependent on the specific object type.

**Returns**:

* `result` (number)

***

### `fogProperty`
<div class="search_terms" style="display: none">fogproperty</div>

Convenient access to this object's fog property. Setting this value to be nil will erase the property, while setting it to a valid fog property will set (or replace) it.

**Returns**:

* `result` ([niFogProperty](../types/niFogProperty.md), nil)

***

### `lodAdjust`
<div class="search_terms" style="display: none">lodadjust</div>

The level-of-detail adjustment value for the camera. This value is used by NiLODNode objects to multiply the distance between the object whose LOD is being computed and the camera. A higher value will lower the LOD of the objects drawn by the camera.

**Returns**:

* `result` (number)

***

### `materialProperty`
<div class="search_terms" style="display: none">materialproperty</div>

Convenient access to this object's material property. Setting this value to be nil will erase the property, while setting it to a valid material property will set (or replace) it.

**Returns**:

* `result` ([niMaterialProperty](../types/niMaterialProperty.md), nil)

***

### `name`
<div class="search_terms" style="display: none">name</div>

The human-facing name of the given object.

**Returns**:

* `result` (string)

***

### `parent`
<div class="search_terms" style="display: none">parent</div>

*Read-only*. The object's parent. It may not have one if it is not attached to the scene.

**Returns**:

* `result` ([niNode](../types/niNode.md))

***

### `port`
<div class="search_terms" style="display: none">port</div>

The port on the backbuffer of the camera. Represents the rectangular portion of the rendering backbuffer to which the camera's view rectangle is drawn (purely 2D mapping). These values are called port settings. The ordering: X - left, Y - right, Z - top and W - bottom. All port settings must be in the unit interval [0, 1]. The left edge of the backbuffer is 0.0, the right edge is 1.0. The top edge of the backbuffer is 1.0, the bottom edge is 0.0.

**Returns**:

* `result` ([tes3vector4](../types/tes3vector4.md))

***

### `properties`
<div class="search_terms" style="display: none">properties</div>

*Read-only*. The list of properties attached to this `niAVObject`.

**Returns**:

* `result` ([niPropertyLinkedList](../types/niPropertyLinkedList.md))

***

### `refCount`
<div class="search_terms" style="display: none">refcount</div>

*Read-only*. The number of references that exist for this object. When this value reaches zero, the object will be deleted.

**Returns**:

* `result` (number)

***

### `renderer`
<div class="search_terms" style="display: none">renderer</div>

*Read-only*. The renderer of the camera.

**Returns**:

* `result` ([niRenderer](../types/niRenderer.md))

***

### `rotation`
<div class="search_terms" style="display: none">rotation</div>

The object's local rotation matrix.

**Returns**:

* `result` ([tes3matrix33](../types/tes3matrix33.md))

***

### `RTTI`
<div class="search_terms" style="display: none">rtti</div>

*Read-only*. The runtime type information for this object. This is an alias for the `.runTimeTypeInformation` property.

**Returns**:

* `result` ([niRTTI](../types/niRTTI.md))

***

### `runTimeTypeInformation`
<div class="search_terms" style="display: none">runtimetypeinformation</div>

*Read-only*. The runtime type information for this object.

**Returns**:

* `result` ([niRTTI](../types/niRTTI.md))

***

### `scale`
<div class="search_terms" style="display: none">scale</div>

The object's local uniform scaling factor.

**Returns**:

* `result` (number)

***

### `scene`
<div class="search_terms" style="display: none">scene</div>

*Read-only*. The scene of the camera.

**Returns**:

* `result` ([niNode](../types/niNode.md))

***

### `stencilProperty`
<div class="search_terms" style="display: none">stencilproperty</div>

Convenient access to this object's stencil property. Setting this value to be nil will erase the property, while setting it to a valid stencil property will set (or replace) it.

**Returns**:

* `result` ([niStencilProperty](../types/niStencilProperty.md), nil)

***

### `texturingProperty`
<div class="search_terms" style="display: none">texturingproperty</div>

Convenient access to this object's texturing property. Setting this value to be nil will erase the property, while setting it to a valid texturing property will set (or replace) it.

**Returns**:

* `result` ([niTexturingProperty](../types/niTexturingProperty.md), nil)

***

### `translation`
<div class="search_terms" style="display: none">translation</div>

The object's local translation vector.

**Returns**:

* `result` ([tes3vector3](../types/tes3vector3.md))

***

### `velocity`
<div class="search_terms" style="display: none">velocity</div>

The object's local velocity.

**Returns**:

* `result` ([tes3vector3](../types/tes3vector3.md))

***

### `vertexColorProperty`
<div class="search_terms" style="display: none">vertexcolorproperty</div>

Convenient access to this object's vertex coloring property. Setting this value to be nil will erase the property, while setting it to a valid vertex coloring property will set (or replace) it.

**Returns**:

* `result` ([niVertexColorProperty](../types/niVertexColorProperty.md), nil)

***

### `viewDistance`
<div class="search_terms" style="display: none">viewdistance</div>

The view distance of the camera.

**Returns**:

* `result` (number)

***

### `worldBoundOrigin`
<div class="search_terms" style="display: none">worldboundorigin</div>

The world coordinates of the object's bounds origin.

**Returns**:

* `result` ([tes3vector3](../types/tes3vector3.md))

***

### `worldBoundRadius`
<div class="search_terms" style="display: none">worldboundradius</div>

The radius of the object's bounds.

**Returns**:

* `result` (number)

***

### `worldDirection`
<div class="search_terms" style="display: none">worlddirection</div>

Defines the X-axis of the camera.

**Returns**:

* `result` ([tes3vector3](../types/tes3vector3.md))

***

### `worldRight`
<div class="search_terms" style="display: none">worldright</div>

Defines the Z-axis of the camera.

**Returns**:

* `result` ([tes3vector3](../types/tes3vector3.md))

***

### `worldToCamera`
<div class="search_terms" style="display: none">worldtocamera</div>

The world-to-camera transform matrix in row-major order.

**Returns**:

* `result` ([tes3matrix44](../types/tes3matrix44.md))

***

### `worldTransform`
<div class="search_terms" style="display: none">worldtransform</div>

The object's transformations in the world space.

**Returns**:

* `result` ([tes3transform](../types/tes3transform.md))

***

### `worldUp`
<div class="search_terms" style="display: none">worldup</div>

Defines the Y-axis of the camera.

**Returns**:

* `result` ([tes3vector3](../types/tes3vector3.md))

***

### `zBufferProperty`
<div class="search_terms" style="display: none">zbufferproperty</div>

Convenient access to this object's z-buffer property. Setting this value to be nil will erase the property, while setting it to a valid z-buffer property will set (or replace) it.

**Returns**:

* `result` ([niZBufferProperty](../types/niZBufferProperty.md), nil)

***

## Methods

### `addExtraData`
<div class="search_terms" style="display: none">addextradata, extradata</div>

Appends an extra data to the object.

```lua
myObject:addExtraData(extraData)
```

**Parameters**:

* `extraData` ([niExtraData](../types/niExtraData.md))

***

### `attachProperty`
<div class="search_terms" style="display: none">attachproperty</div>

Attaches a property to this object, without checking to see if the property or another of its type is already on the list. Property lists must not have more than one property of a given class (i.e. no two niTexturingProperty objects) attached at once, or else undefined behavior will result.

```lua
myObject:attachProperty(property)
```

**Parameters**:

* `property` ([niProperty](../types/niProperty.md))

***

### `clear`
<div class="search_terms" style="display: none">clear</div>

This method clears the current render target of the camera's renderer. Uses flag values from [`ni.cameraClearFlags`](https://mwse.github.io/MWSE/references/ni/camera-clear-flags/).

```lua
myObject:clear(flags)
```

**Parameters**:

* `flags` ([ni.cameraClearFlags](../references/ni/camera-clear-flags.md)): *Default*: `ni.cameraClearFlags.all`.

***

### `clearTransforms`
<div class="search_terms" style="display: none">cleartransforms</div>

Resets the object's local transform.

```lua
myObject:clearTransforms()
```

***

### `click`
<div class="search_terms" style="display: none">click</div>

This method renders the currently-attached scene graph to the active renderer.

```lua
myObject:click(something)
```

**Parameters**:

* `something` (boolean): *Default*: `false`.

***

### `clone`
<div class="search_terms" style="display: none">clone</div>

Creates a copy of this object.

```lua
local result = myObject:clone()
```

**Returns**:

* `result` ([niObject](../types/niObject.md))

***

### `copyTransforms`
<div class="search_terms" style="display: none">copytransforms</div>

Update object's local transform by copying from another source.

```lua
myObject:copyTransforms(source)
```

**Parameters**:

* `source` ([niAVObject](../types/niAVObject.md), [tes3transform](../types/tes3transform.md))

***

### `detachAllProperties`
<div class="search_terms" style="display: none">detachallproperties</div>

Detaches all the properties on the object and returns them in the table.

```lua
local result = myObject:detachAllProperties()
```

**Returns**:

* `result` ([niProperty](../types/niProperty.md)[])

***

### `detachProperty`
<div class="search_terms" style="display: none">detachproperty</div>

Detaches and returns a property from the object which matches the given property type.

```lua
local result = myObject:detachProperty(type)
```

**Parameters**:

* `type` ([ni.propertyType](../references/ni/property-types.md)): The types are available in [`ni.propertyType`](https://mwse.github.io/MWSE/references/ni/property-types/) table.

**Returns**:

* `result` ([niProperty](../types/niProperty.md))

***

### `getGameReference`
<div class="search_terms" style="display: none">getgamereference, gamereference</div>

Searches for an niExtraData on this object to see if it has one that holds a related reference.

```lua
local reference = myObject:getGameReference(searchParents)
```

**Parameters**:

* `searchParents` (boolean): *Default*: `false`. If true, all parent objects (if applicable) are also searched.

**Returns**:

* `reference` ([tes3reference](../types/tes3reference.md))

***

### `getObjectByName`
<div class="search_terms" style="display: none">getobjectbyname, objectbyname</div>

Searches this node and all child nodes recursively for a node with a name that matches the argument.

```lua
local result = myObject:getObjectByName(name)
```

**Parameters**:

* `name` (string)

**Returns**:

* `result` ([niAVObject](../types/niAVObject.md))

***

### `getProperty`
<div class="search_terms" style="display: none">getproperty, property</div>

Gets an attached property by property type.

```lua
local result = myObject:getProperty(type)
```

**Parameters**:

* `type` ([ni.propertyType](../references/ni/property-types.md)): The types are available in [`ni.propertyType`](https://mwse.github.io/MWSE/references/ni/property-types/) table.

**Returns**:

* `result` ([niProperty](../types/niProperty.md))

***

### `getStringDataStartingWith`
<div class="search_terms" style="display: none">getstringdatastartingwith, stringdatastartingwith</div>

Searches for an niExtraData on this object to see if it has niStringExtraData that has its string start with the provided `value` argument.

```lua
local extra = myObject:getStringDataStartingWith(value)
```

**Parameters**:

* `value` (string): The first niStringExtraData starting with this value will be returned.

**Returns**:

* `extra` ([niStringExtraData](../types/niStringExtraData.md))

***

### `getStringDataWith`
<div class="search_terms" style="display: none">getstringdatawith, stringdatawith</div>

Searches for an niExtraData on this object to see if it has niStringExtraData that has the provided `value` argument in its string field.

```lua
local extra = myObject:getStringDataWith(value)
```

**Parameters**:

* `value` (string): The first niStringExtraData with this word will be returned.

**Returns**:

* `extra` ([niStringExtraData](../types/niStringExtraData.md))

***

### `hasStringDataStartingWith`
<div class="search_terms" style="display: none">hasstringdatastartingwith, stringdatastartingwith</div>

Searches for an niExtraData on this object to see if it has niStringExtraData that has its string start with the provided `value` argument. Returns true if the value was found.

```lua
local result = myObject:hasStringDataStartingWith(value)
```

**Parameters**:

* `value` (string): The value to search for.

**Returns**:

* `result` (boolean)

***

### `hasStringDataWith`
<div class="search_terms" style="display: none">hasstringdatawith, stringdatawith</div>

Searches for an niExtraData on this object to see if it has niStringExtraData that contains the provided `value` argument in its string field. Returns true if the value was found.

```lua
local result = myObject:hasStringDataWith(value)
```

**Parameters**:

* `value` (string): The value to search for.

**Returns**:

* `result` (boolean)

***

### `isAppCulled`
<div class="search_terms" style="display: none">isappculled, appculled</div>

Recursively checks if either the object or any of its parents are appCulled.

```lua
local result = myObject:isAppCulled()
```

**Returns**:

* `result` (boolean)

***

### `isFrustumCulled`
<div class="search_terms" style="display: none">isfrustumculled, frustumculled</div>

Checks if the object is frustum culled for the given camera.

```lua
local result = myObject:isFrustumCulled(camera)
```

**Parameters**:

* `camera` ([niCamera](../types/niCamera.md))

**Returns**:

* `result` (boolean)

***

### `isInstanceOfType`
<div class="search_terms" style="display: none">isinstanceoftype, instanceoftype</div>

Determines if the object is of a given type, or of a type derived from the given type.

```lua
local result = myObject:isInstanceOfType(type)
```

**Parameters**:

* `type` ([ni.type](../references/ni/types.md)): Use values in the [`ni.type`](https://mwse.github.io/MWSE/references/ni/types/) table.

**Returns**:

* `result` (boolean)

***

### `isOfType`
<div class="search_terms" style="display: none">isoftype, oftype</div>

Determines if the object is of a given type.

```lua
local result = myObject:isOfType(type)
```

**Parameters**:

* `type` ([ni.type](../references/ni/types.md)): Use values in the [`ni.type`](https://mwse.github.io/MWSE/references/ni/types/) table.

**Returns**:

* `result` (boolean)

***

### `lookAtWorldPoint`
<div class="search_terms" style="display: none">lookatworldpoint</div>

Update the camera's local rotation so that it is looking at the given point, with an up vector as close as possible to the given up vector. Both parameters are assumed to be in world space.

```lua
local success = myObject:lookAtWorldPoint(point, up)
```

**Parameters**:

* `point` ([tes3vector3](../types/tes3vector3.md))
* `up` ([tes3vector3](../types/tes3vector3.md))

**Returns**:

* `success` (boolean): It's false when the provided location is equal to the location of the camera. It's true on success.

***

### `prependController`
<div class="search_terms" style="display: none">prependcontroller</div>

Add a controller to the object as the first controller.

```lua
myObject:prependController(controller)
```

**Parameters**:

* `controller` ([niTimeController](../types/niTimeController.md))

***

### `propagatePositionChange`
<div class="search_terms" style="display: none">propagatepositionchange</div>

Alias for `update()` method. Updates the world transforms of this node and its children, which makes changes visible for rendering. Use after changing any local rotation, translation, scale, bounds or after attaching and detaching nodes.

!!! tip
	It's best to "batch up" calls to this method. For example, when transform of an object its parent and grandparent are all changed during the same frame, it is much more efficient to call this method only on the grandparent object after all transforms have been changed. Also, consider calling this function as low as possible on a scene graph.


```lua
myObject:propagatePositionChange({ time = ..., controllers = ..., bounds = ... })
```

**Parameters**:

* `args` (table): *Optional*.
	* `time` (number): *Default*: `0`. This parameter is the time-slice for transformation and bounds updates
	* `controllers` (boolean): *Default*: `false`. Update object's controllers?
	* `bounds` (boolean): *Default*: `true`. Update object's bounds?

***

### `removeAllControllers`
<div class="search_terms" style="display: none">removeallcontrollers, allcontrollers</div>

Removes all controllers.

```lua
myObject:removeAllControllers()
```

***

### `removeAllExtraData`
<div class="search_terms" style="display: none">removeallextradata, allextradata</div>

Removes all extra data.

```lua
myObject:removeAllExtraData()
```

***

### `removeController`
<div class="search_terms" style="display: none">removecontroller, controller</div>

Removes a controller from the object.

```lua
myObject:removeController(controller)
```

**Parameters**:

* `controller` ([niTimeController](../types/niTimeController.md))

***

### `removeExtraData`
<div class="search_terms" style="display: none">removeextradata, extradata</div>

Removes a specific extra data from the object.

```lua
myObject:removeExtraData(extraData)
```

**Parameters**:

* `extraData` ([niExtraData](../types/niExtraData.md))

***

### `saveBinary`
<div class="search_terms" style="display: none">savebinary</div>

Serializes the object, and writes it to the given file.

```lua
local success = myObject:saveBinary(path)
```

**Parameters**:

* `path` (string): The path to write the file at, relative to the Morrowind installation folder.

**Returns**:

* `success` (boolean): If true the object was successfully serialized.

***

### `setFlag`
<div class="search_terms" style="display: none">setflag, flag</div>

Sets a given flag in the niObjectNET flag data. The specifics use of the flag is dependent on the real underlying type.

```lua
myObject:setFlag(state, index)
```

**Parameters**:

* `state` (boolean)
* `index` (number)

***

### `swapBuffers`
<div class="search_terms" style="display: none">swapbuffers</div>

Causes the current backbuffer of the attached display to be drawn to the frontbuffer, by swapping the two.

```lua
myObject:swapBuffers()
```

***

### `update`
<div class="search_terms" style="display: none">update</div>

Updates the world transforms of this node and its children, which makes changes visible for rendering. Use after changing any local rotation, translation, scale, bounds or after attaching and detaching nodes.

!!! tip	"Update Efficiency"
	It's best to "batch up" calls to this method. For example, when transform of an object its parent and grandparent are all changed during the same frame, it is much more efficient to call this method only on the grandparent object after all transforms have been changed. Also, consider calling this function as low as possible on a scene graph.


```lua
myObject:update({ time = ..., controllers = ..., bounds = ... })
```

**Parameters**:

* `args` (table): *Optional*.
	* `time` (number): *Default*: `0`. This parameter is the time-slice for transformation and bounds updates
	* `controllers` (boolean): *Default*: `false`. Update object's controllers?
	* `bounds` (boolean): *Default*: `true`. Update object's bounds?

***

### `updateEffects`
<div class="search_terms" style="display: none">updateeffects, effects</div>

Update all attached effects. This method must be called at or above any object when dynamic effects are attached or detached from it

```lua
myObject:updateEffects()
```

***

### `updateProperties`
<div class="search_terms" style="display: none">updateproperties, properties</div>

Update all attached properties.

```lua
myObject:updateProperties()
```

***

### `windowPointToRay`
<div class="search_terms" style="display: none">windowpointtoray</div>

Given a screen space position, calculates the world position and outlook direction. This can be useful when trying to find a reference under a UI element, such as the cusor.

```lua
local origin, direction = myObject:windowPointToRay(point)
```

**Parameters**:

* `point` ([tes3vector2](../types/tes3vector2.md), number[]): The screen position to calculate a world ray for. Screen space is measured as ([-screenWidth/2, screenWidth/2], [-screenHeight/2, screenHeight/2]) with up-right being positive and an origin at the center of the screen.

**Returns**:

* `origin` ([tes3vector3](../types/tes3vector3.md)): The world point that the given screen position looks out from.
* `direction` ([tes3vector3](../types/tes3vector3.md)): The look direction of the camera from the given origin point.

??? example "Example: Sampling landscape texture under the crosshair/mouse cursor"

	```lua
	
	local function onEnterFrame()
		local cursor = tes3.getCursorPosition()
		local camera = tes3.worldController.worldCamera.cameraData.camera
		local position, direction = camera:windowPointToRay({ cursor.x, cursor.y })
	
		local hit = tes3.rayTest({
			position = position,
			direction = direction,
			-- Let's ray test agains terrain
			root = tes3.game.worldLandscapeRoot
		})
		if not hit or not hit.object then return end
	
		local texturingProperty = hit.object.texturingProperty
		if not texturingProperty then return end
	
		local baseMap = texturingProperty.maps[1]
		if not baseMap or not baseMap.texture then return end
	
		tes3.messageBox(baseMap.texture.fileName)
	end
	
	local function onLoaded()
		if event.isRegistered(tes3.event.enterFrame, onEnterFrame) then return end
	
		event.register(tes3.event.enterFrame, onEnterFrame)
	end
	
	event.register(tes3.event.loaded, onLoaded)

	```

***

### `worldPointToScreenPoint`
<div class="search_terms" style="display: none">worldpointtoscreenpoint</div>

Given a world coordinate position, calculates where that point relates to the screen space.

```lua
local screenPosition = myObject:worldPointToScreenPoint(point)
```

**Parameters**:

* `point` ([tes3vector3](../types/tes3vector3.md)): The world position to calculate screen position for.

**Returns**:

* `screenPosition` ([tes3vector2](../types/tes3vector2.md)): The screen space position. Screen space is measured as ([-screenWidth/2, screenWidth/2], [-screenHeight/2, screenHeight/2]) with up-right being positive and an origin at the center of the screen.

