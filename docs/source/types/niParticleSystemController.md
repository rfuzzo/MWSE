# niParticleSystemController
<div class="search_terms" style="display: none">niparticlesystemcontroller, particlesystemcontroller</div>

<!---
	This file is autogenerated. Do not edit this file manually. Your changes will be ignored.
	More information: https://github.com/MWSE/MWSE/tree/master/docs
-->

The niParticleSystemController animates an niParticles-based object. The controller handles birth and death, spawning and motion.

A particle spawn can be set to occur when the particle undergoes a specific condition, such as colliding with an object or dying. When such an event happens, naw particles are generated at the position of the old particle with the same attributes as the original particle. This behaviour will continue until the number of spawn generations equals the number of generations allowed. The number of new particles, precentage of particles that undergo spawning, speed and directional chaos values can be specified.

This type inherits the following: [niTimeController](../types/niTimeController.md), [niObject](../types/niObject.md)
## Properties

### `active`
<div class="search_terms" style="display: none">active</div>

If the controller is active. When inactive, the target does not get updated and animation timing does not advance.

**Returns**:

* `result` (boolean)

***

### `activeParticleCount`
<div class="search_terms" style="display: none">activeparticlecount</div>

*Read-only*. The number of active particles in the initial particles array.

**Returns**:

* `result` (integer)

***

### `animTimingType`
<div class="search_terms" style="display: none">animtimingtype</div>

How the time parameter passed to the update function is treated. Type 0 is the default, which treats the update time as a delta time. Type 1 treats the update time an offset from the start of the animation.

Maps to values in [`ni.animType`](https://mwse.github.io/MWSE/references/ni/animation-types/) table.

**Returns**:

* `result` ([ni.animType](../references/ni/animation-types.md))

***

### `birthRate`
<div class="search_terms" style="display: none">birthrate</div>

The rate at which new particles are generated.

**Returns**:

* `result` (number)

***

### `currentParticleIndex`
<div class="search_terms" style="display: none">currentparticleindex</div>

*Read-only*. 

**Returns**:

* `result` (integer)

***

### `cycleType`
<div class="search_terms" style="display: none">cycletype</div>

The animation cycle type. Type 0 is looping, type 2 is reverse, type 4 is clamped.

Maps to values in [`ni.animCycleType`](https://mwse.github.io/MWSE/references/ni/animation-cycle-types/) table.

**Returns**:

* `result` ([ni.animCycleType](../references/ni/animation-cycle-types.md))

***

### `declinationAngle`
<div class="search_terms" style="display: none">declinationangle</div>

The declination angle of the velocity vector of newly spawned particles from the positive Z axis in radians. The range is [0, PI], where declination angle of `0` will set the initial velocity vector to [0, 0, 1]. Declination angle of PI will set the initial velocity vector to [0, 0, -1].

**Returns**:

* `result` (number)

***

### `declinationAngleVariation`
<div class="search_terms" style="display: none">declinationanglevariation</div>

The variation of the initial declination angle. The initial velocity declination will be evenly distributed over the [`.declinationAngle - .declinationAngleVariation / 2`, `.declinationAngle + .declinationAngleVariation / 2`] range.

**Returns**:

* `result` (number)

***

### `emitStartTime`
<div class="search_terms" style="display: none">emitstarttime</div>

The time value at which the niParticleSystemController will start emitting particles. If this value is less than the `.startTime` variable (inherited from niTimeController), the controller will perform a run-up for the amount of time indicated by the difference.

**Returns**:

* `result` (number)

***

### `emitStopTime`
<div class="search_terms" style="display: none">emitstoptime</div>

The time value at which the controller stops emitting the particles.

**Returns**:

* `result` (number)

***

### `emitter`
<div class="search_terms" style="display: none">emitter</div>

The object that emits the particles. The emitter volume is transformed into the world coordinates of the emitter before new particles are generated. This allows the transforms of the emitter to change without affecting the transforms of all the particles in the system.

**Returns**:

* `result` ([niObject](../types/niObject.md))

***

### `emitterDepth`
<div class="search_terms" style="display: none">emitterdepth</div>

Determines the dimensions of the volume from which new particles are generated.

**Returns**:

* `result` (number)

***

### `emitterHeight`
<div class="search_terms" style="display: none">emitterheight</div>

Determines the dimensions of the volume from which new particles are generated.

**Returns**:

* `result` (number)

***

### `emitterModifiers`
<div class="search_terms" style="display: none">emittermodifiers</div>

Modifiers that will influence the particle system by modifying the emmiting object.

**Returns**:

* `result` ([niObject](../types/niObject.md)[])

***

### `emitterWidth`
<div class="search_terms" style="display: none">emitterwidth</div>

Determines the dimensions of the volume from which new particles are generated.

**Returns**:

* `result` (number)

***

### `firstTime`
<div class="search_terms" style="display: none">firsttime</div>



**Returns**:

* `result` (integer)

***

### `frequency`
<div class="search_terms" style="display: none">frequency</div>

The animation controller's frequency value. It is a scaling value used to convert from update time units to keyframe time units, if necessary.

**Returns**:

* `result` (number)

***

### `highKeyFrame`
<div class="search_terms" style="display: none">highkeyframe</div>

This is the end animation key time of the animation controller.

**Returns**:

* `result` (number)

***

### `initialColor`
<div class="search_terms" style="display: none">initialcolor</div>

The initial color given to the newly created particles.

**Returns**:

* `result` ([niPackedColor](../types/niPackedColor.md))

***

### `initialNormal`
<div class="search_terms" style="display: none">initialnormal</div>

*Default*: `{1.0, 0.0, 0.0}`. The normal vector given to the newly created particles.

**Returns**:

* `result` ([tes3vector3](../types/tes3vector3.md))

***

### `initialSize`
<div class="search_terms" style="display: none">initialsize</div>

The initial size of the new particles.

**Returns**:

* `result` (number)

***

### `lastEmit`
<div class="search_terms" style="display: none">lastemit</div>

The timestamp at which the last emitted particles were created.

**Returns**:

* `result` (number)

***

### `lastScaledTime`
<div class="search_terms" style="display: none">lastscaledtime</div>

This function returns the last scaled time computed by this controller. The scaled time takes the `frequency` and `phase` into account, along with the `cycleType` and `animTimingType`. This is the last value used to interpolate animation keys.

**Returns**:

* `result` (number)

***

### `lastTime`
<div class="search_terms" style="display: none">lasttime</div>

No description.

**Returns**:

* `result` (number)

***

### `lifespan`
<div class="search_terms" style="display: none">lifespan</div>

The life spane for each particle.

**Returns**:

* `result` (number)

***

### `lifespanVariance`
<div class="search_terms" style="display: none">lifespanvariance</div>

The variation of the particle life span. It will be evenly distributed over the [`.lifespan - .lifespanVariance / 2`, `.lifespan + .lifespanVariance / 2`] range.

**Returns**:

* `result` (number)

***

### `lowKeyFrame`
<div class="search_terms" style="display: none">lowkeyframe</div>

This is the beginning animation key time of the animation controller.

**Returns**:

* `result` (number)

***

### `nextController`
<div class="search_terms" style="display: none">nextcontroller</div>

The next animation controller in the list of controllers containing the calling controller.

**Returns**:

* `result` ([niTimeController](../types/niTimeController.md))

***

### `particleColliders`
<div class="search_terms" style="display: none">particlecolliders</div>

Collider modifiers that will influence the individual particles.

**Returns**:

* `result` ([niParticleCollider](../types/niParticleCollider.md)[])

***

### `particleDataCount`
<div class="search_terms" style="display: none">particledatacount</div>

*Read-only*. The number of initial particles.

**Returns**:

* `result` (integer)

***

### `particleModifiers`
<div class="search_terms" style="display: none">particlemodifiers</div>

Modifiers that will influence the individual particles.

**Returns**:

* `result` ([niParticleModifier](../types/niParticleModifier.md)[])

***

### `phase`
<div class="search_terms" style="display: none">phase</div>

The phase value. It is an offset applied to the animation's update time, in seconds.

**Returns**:

* `result` (number)

***

### `planarAngle`
<div class="search_terms" style="display: none">planarangle</div>

The planar angle (around the Z axis from the positive X axis) that will serve as the plane in which the declination will occur. The expected range of the planar angle is [0, 2PI).

**Returns**:

* `result` (number)

***

### `planarAngleVariation`
<div class="search_terms" style="display: none">planaranglevariation</div>

The variation of the initial planar angle. The planar angle will be evenly distributed over the [`.planarAngle - .planarAngleVariation / 2`, `.planarAngle + .planarAngleVariation / 2`] range.

**Returns**:

* `result` (number)

***

### `refCount`
<div class="search_terms" style="display: none">refcount</div>

*Read-only*. The number of references that exist for this object. When this value reaches zero, the object will be deleted.

**Returns**:

* `result` (number)

***

### `resetParticleSystem`
<div class="search_terms" style="display: none">resetparticlesystem</div>

Controls whether the system will be reset when the niParticleSystemController loops. If this flag is set to `true`, existing particles will be eliminated when the controller loops, and any run-up indicated by `.emitStartTime` variable will occur. Otherwise, the controller will simply continue running from the beginning of the loop, and the existing particles will continue to run until they die out naturally.

**Returns**:

* `result` (boolean)

***

### `RTTI`
<div class="search_terms" style="display: none">rtti</div>

*Read-only*. The runtime type information for this object. This is an alias for the `.runTimeTypeInformation` property.

**Returns**:

* `result` ([niRTTI](../types/niRTTI.md))

***

### `runTimeTypeInformation`
<div class="search_terms" style="display: none">runtimetypeinformation</div>

*Read-only*. The runtime type information for this object.

**Returns**:

* `result` ([niRTTI](../types/niRTTI.md))

***

### `scaledLastTime`
<div class="search_terms" style="display: none">scaledlasttime</div>



**Returns**:

* `result` (number)

***

### `spawnDirectionChaos`
<div class="search_terms" style="display: none">spawndirectionchaos</div>

Controls the change in direction that new particles generated by a spawn event will have. A value of `0.0` indicates no change in direction, and a value of `1.0` indicates a 0 % to 100 % change in direction.

**Returns**:

* `result` (number)

***

### `spawnGenerationsCount`
<div class="search_terms" style="display: none">spawngenerationscount</div>

The number of spawn generations a particle can go through.

**Returns**:

* `result` (integer)

***

### `spawnMultiplier`
<div class="search_terms" style="display: none">spawnmultiplier</div>

The number of new particles generated on a spawn event.

**Returns**:

* `result` (integer)

***

### `spawnOnDeath`
<div class="search_terms" style="display: none">spawnondeath</div>

This flag indicates whether a particle spawn event will occur upon particle death.

**Returns**:

* `result` (boolean)

***

### `spawnPercentage`
<div class="search_terms" style="display: none">spawnpercentage</div>

The percentage of the particles that will actually spawn when a spawn event occurs Expected values are in range [0.0, 1.0].

**Returns**:

* `result` (number)

***

### `spawnSpeedChaos`
<div class="search_terms" style="display: none">spawnspeedchaos</div>

Controls the change in speed that new particles generated by a spawn event will have. A value of `0.0` indicates no change in speed, a value of `1.0` indicates a 0 % to 100 % increase in speed, and a value of `-1.0` indicates 0 % to 100 % decrease in speed.

**Returns**:

* `result` (number)

***

### `speed`
<div class="search_terms" style="display: none">speed</div>

This is the initial speed of the newly spawned particles.

**Returns**:

* `result` (number)

***

### `speedVariation`
<div class="search_terms" style="display: none">speedvariation</div>

The variation of the initial velocity. The initial velocity will be evenly distributed over the [`.speed - .speedVariation / 2`, `.speed + .speedVariation / 2`] range.

**Returns**:

* `result` (number)

***

### `startTime`
<div class="search_terms" style="display: none">starttime</div>

The time at which the animation controller starts playing its animation.

**Returns**:

* `result` (number)

***

### `staticBounds`
<div class="search_terms" style="display: none">staticbounds</div>

This flag controls whether or not the controller uses precomputed static bounding volumes for each frame of the animation.

**Returns**:

* `result` (boolean)

***

### `target`
<div class="search_terms" style="display: none">target</div>

*Read-only*. The scene graph object that this animation controller is to animate.

**Returns**:

* `result` ([niObjectNET](../types/niObjectNET.md))

***

### `useBirthRate`
<div class="search_terms" style="display: none">usebirthrate</div>

If this flag is set to `false`, the maximal sustainable birth rate based on the life span of the particles will be used. Otherwise, the value of `.birthRate` property will be used.

**Returns**:

* `result` (boolean)

***

## Methods

### `clone`
<div class="search_terms" style="display: none">clone</div>

Creates a copy of this object.

```lua
local result = myObject:clone()
```

**Returns**:

* `result` ([niObject](../types/niObject.md))

***

### `isInstanceOfType`
<div class="search_terms" style="display: none">isinstanceoftype, instanceoftype</div>

Determines if the object is of a given type, or of a type derived from the given type.

```lua
local result = myObject:isInstanceOfType(type)
```

**Parameters**:

* `type` ([ni.type](../references/ni/types.md)): Use values in the [`ni.type`](https://mwse.github.io/MWSE/references/ni/types/) table.

**Returns**:

* `result` (boolean)

***

### `isOfType`
<div class="search_terms" style="display: none">isoftype, oftype</div>

Determines if the object is of a given type.

```lua
local result = myObject:isOfType(type)
```

**Parameters**:

* `type` ([ni.type](../references/ni/types.md)): Use values in the [`ni.type`](https://mwse.github.io/MWSE/references/ni/types/) table.

**Returns**:

* `result` (boolean)

***

### `saveBinary`
<div class="search_terms" style="display: none">savebinary</div>

Serializes the object, and writes it to the given file.

```lua
local success = myObject:saveBinary(path)
```

**Parameters**:

* `path` (string): The path to write the file at, relative to the Morrowind installation folder.

**Returns**:

* `success` (boolean): If true the object was successfully serialized.

***

### `setTarget`
<div class="search_terms" style="display: none">settarget, target</div>

This method assigns a new target to the animation controller.

```lua
myObject:setTarget(target)
```

**Parameters**:

* `target` ([niObjectNET](../types/niObjectNET.md)): The new target to assign.

***

### `start`
<div class="search_terms" style="display: none">start</div>

Starts the controller at the specified time. Intended for controllers with `animTimingType` of 1.

```lua
myObject:start(time)
```

**Parameters**:

* `time` (number)

***

### `stop`
<div class="search_terms" style="display: none">stop</div>

Stops the controller. If you only want to pause the controller, use the `update` property.

```lua
myObject:stop()
```

