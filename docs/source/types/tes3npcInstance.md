# tes3npcInstance
<div class="search_terms" style="display: none">tes3npcinstance, npcinstance</div>

<!---
	This file is autogenerated. Do not edit this file manually. Your changes will be ignored.
	More information: https://github.com/MWSE/MWSE/tree/master/docs
-->

An NPC object that has been cloned. Typically represents an NPC that has been instanced in the world.

This type inherits the following: [tes3actor](../types/tes3actor.md), [tes3physicalObject](../types/tes3physicalObject.md), [tes3object](../types/tes3object.md), [tes3baseObject](../types/tes3baseObject.md).
## Properties

### `actorFlags`
<div class="search_terms" style="display: none">actorflags</div>

*Read-only*. A number representing the actor flags. Truly a bit field.

**Returns**:

* `result` (number)

***

### `aiConfig`
<div class="search_terms" style="display: none">aiconfig</div>

*Read-only*. A substructure off of actors that contains information on the current AI configuration.

**Returns**:

* `result` ([tes3aiConfig](../types/tes3aiConfig.md))

??? example "Example: Checking if an NPC offers traveling service"

	```lua
	
	--- This function returns `true` if given NPC
	--- or creature offers traveling service.
	---@param actor tes3npc|tes3npcInstance|tes3creature|tes3creatureInstance
	---@return boolean
	local function offersTraveling(actor)
		local travelDestinations = actor.aiConfig.travelDestinations
	
		-- Actors that can't transport the player
		-- have travelDestinations equal to `nil`
		return travelDestinations ~= nil
	end

	```

***

### `attributes`
<div class="search_terms" style="display: none">attributes</div>

Quick access to the base NPC's attributes.

!!! note
	This array is 1-indexed. The array indices correspond to the [`tes3.attribute`](https://mwse.github.io/MWSE/references/attributes/) table plus 1 to account for Lua's 1-based array indexing. In other words `npc.attributes[tes3.attribute.speed + 1]` returns the attribute value corresponding to Speed.

**Returns**:

* `result` (number[])

***

### `autoCalc`
<div class="search_terms" style="display: none">autocalc</div>

Direct access to the actor autocalc flag.

**Returns**:

* `result` (boolean)

***

### `barterGold`
<div class="search_terms" style="display: none">bartergold</div>

The actor's base barter gold amount. This is the amount of the barter gold an actor initially has, and also when barter gold is refreshed. The actor's current barter gold amount is held in `tes3mobileActor.barterGold`.

Barter gold is reset on talking to an actor if fBarterGoldResetDelay hours have passed since the last transaction. If you want to change the base amount, for example in an investment mod, you must edit the barterGold of the baseObject.

**Returns**:

* `result` (number)

***

### `baseDisposition`
<div class="search_terms" style="display: none">basedisposition</div>

The actor's base disposition.

**Returns**:

* `result` (number)

***

### `baseObject`
<div class="search_terms" style="display: none">baseobject</div>

*Read-only*. Access to the base NPC object.

**Returns**:

* `result` ([tes3npc](../types/tes3npc.md))

***

### `blocked`
<div class="search_terms" style="display: none">blocked</div>

The blocked state of the object.

**Returns**:

* `result` (boolean)

***

### `blood`
<div class="search_terms" style="display: none">blood</div>

Friendly access to actor's blood type, in [0, 7] range. The available blood types are defined in the Morrowind.ini file, and assigned to the actor via the Construction Set.

**Returns**:

* `result` (integer)

***

### `boundingBox`
<div class="search_terms" style="display: none">boundingbox</div>

The bounding box for the object.

**Returns**:

* `result` ([tes3boundingBox](../types/tes3boundingBox.md))

***

### `class`
<div class="search_terms" style="display: none">class</div>

*Read-only*. Quick access to the base NPC's class.

**Returns**:

* `result` ([tes3class](../types/tes3class.md))

***

### `cloneCount`
<div class="search_terms" style="display: none">clonecount</div>

*Read-only*. For base objects this is the number of clones that exist of this actor. For instances this is the ordinal number of the instance.

**Returns**:

* `result` (number)

***

### `deleted`
<div class="search_terms" style="display: none">deleted</div>

*Read-only*. The deleted state of the object.

**Returns**:

* `result` (boolean)

***

### `disabled`
<div class="search_terms" style="display: none">disabled</div>

*Read-only*. The disabled state of the object.

**Returns**:

* `result` (boolean)

***

### `disposition`
<div class="search_terms" style="display: none">disposition</div>

*Read-only*. The actor's effective disposition, with all modifiers applied.

**Returns**:

* `result` (number)

***

### `equipment`
<div class="search_terms" style="display: none">equipment</div>

*Read-only*. The items currently equipped to the actor.

**Returns**:

* `result` ([tes3equipmentStack](../types/tes3equipmentStack.md)[])

***

### `faction`
<div class="search_terms" style="display: none">faction</div>

*Read-only*. Quick access to the base NPC's faction.

**Returns**:

* `result` ([tes3faction](../types/tes3faction.md))

***

### `factionRank`
<div class="search_terms" style="display: none">factionrank</div>

*Read-only*. Quick access to the base NPC's faction rank.

**Returns**:

* `result` (number)

***

### `fatigue`
<div class="search_terms" style="display: none">fatigue</div>

*Read-only*. Quick access to the base NPC's fatigue.

**Returns**:

* `result` (number)

***

### `female`
<div class="search_terms" style="display: none">female</div>

Direct access to the actor female flag.

**Returns**:

* `result` (boolean)

***

### `health`
<div class="search_terms" style="display: none">health</div>

*Read-only*. Quick access to the base NPC's health.

**Returns**:

* `result` (number)

***

### `height`
<div class="search_terms" style="display: none">height</div>

*Read-only*. Convenience access to the NPCs (race) height.

**Returns**:

* `result` (number)

***

### `id`
<div class="search_terms" style="display: none">id</div>

*Read-only*. The unique identifier for the object.

**Returns**:

* `result` (string)

***

### `inventory`
<div class="search_terms" style="display: none">inventory</div>

*Read-only*. The items currently carried by the actor.

**Returns**:

* `result` ([tes3inventory](../types/tes3inventory.md), [tes3itemStack](../types/tes3itemStack.md)[])

***

### `isAttacked`
<div class="search_terms" style="display: none">isattacked, attacked</div>

*Read-only*. If true, the actor's attacked flag is set.

**Returns**:

* `result` (boolean)

***

### `isEssential`
<div class="search_terms" style="display: none">isessential, essential</div>

*Read-only*. If true, the actor's essential flag is set.

**Returns**:

* `result` (boolean)

***

### `isGuard`
<div class="search_terms" style="display: none">isguard, guard</div>

*Read-only*. If true, the actor is a guard.

**Returns**:

* `result` (boolean)

***

### `isInstance`
<div class="search_terms" style="display: none">isinstance, instance</div>

Always returns true.

**Returns**:

* `result` (boolean)

***

### `isLocationMarker`
<div class="search_terms" style="display: none">islocationmarker, locationmarker</div>

True if this object is an editor marker for a gameplay location. These include travel, intervention, prison, door, and interior north markers. Markers are invisible in-game.

**Returns**:

* `result` (boolean)

***

### `isRespawn`
<div class="search_terms" style="display: none">isrespawn, respawn</div>

*Read-only*. If true, the actor's respawn flag is set.

**Returns**:

* `result` (boolean)

***

### `level`
<div class="search_terms" style="display: none">level</div>

*Read-only*. Quick access to the base NPC's level.

**Returns**:

* `result` (number)

***

### `magicka`
<div class="search_terms" style="display: none">magicka</div>

*Read-only*. Quick access to the base NPC's magicka.

**Returns**:

* `result` (number)

***

### `mesh`
<div class="search_terms" style="display: none">mesh</div>

The path to the object's mesh.

**Returns**:

* `result` (string)

***

### `mobile`
<div class="search_terms" style="display: none">mobile</div>

*Read-only*. The mobile that the object is represented by.

**Returns**:

* `result` ([tes3mobileActor](../types/tes3mobileActor.md))

***

### `modified`
<div class="search_terms" style="display: none">modified, ified</div>

The modification state of the object since the last save.

**Returns**:

* `result` (boolean)

***

### `name`
<div class="search_terms" style="display: none">name</div>

Quick access to the base NPC's name.

**Returns**:

* `result` (string)

***

### `nextInCollection`
<div class="search_terms" style="display: none">nextincollection</div>

The next object in parent collection's list.

**Returns**:

* `result` ([tes3object](../types/tes3object.md))

***

### `objectFlags`
<div class="search_terms" style="display: none">objectflags</div>

*Read-only*. The raw flags of the object.

**Returns**:

* `result` (number)

***

### `objectType`
<div class="search_terms" style="display: none">objecttype</div>

*Read-only*. The type of object. Maps to values in [`tes3.objectType`](https://mwse.github.io/MWSE/references/object-types/).

**Returns**:

* `result` ([tes3.objectType](../references/object-types.md))

***

### `owningCollection`
<div class="search_terms" style="display: none">owningcollection</div>

The collection responsible for holding this object.

**Returns**:

* `result` ([tes3referenceList](../types/tes3referenceList.md))

***

### `persistent`
<div class="search_terms" style="display: none">persistent</div>

The persistent flag of the object.

**Returns**:

* `result` (boolean)

***

### `previousInCollection`
<div class="search_terms" style="display: none">previousincollection</div>

The previous object in parent collection's list.

**Returns**:

* `result` ([tes3object](../types/tes3object.md))

***

### `race`
<div class="search_terms" style="display: none">race</div>

*Read-only*. Quick access to the base NPC's race.

**Returns**:

* `result` ([tes3race](../types/tes3race.md))

***

### `reference`
<div class="search_terms" style="display: none">reference</div>

*Read-only*. The reference that the object is represented by.

**Returns**:

* `result` ([tes3reference](../types/tes3reference.md))

***

### `reputation`
<div class="search_terms" style="display: none">reputation</div>

The actor's reputation.

**Returns**:

* `result` (number)

***

### `scale`
<div class="search_terms" style="display: none">scale</div>

The object's scale. The value range is (0, 10).

**Returns**:

* `result` (number)

***

### `sceneCollisionRoot`
<div class="search_terms" style="display: none">scenecollisionroot</div>

The scene graph node for this object's physics collision, if its mesh has a root collision node.

**Returns**:

* `result` ([niNode](../types/niNode.md))

***

### `sceneNode`
<div class="search_terms" style="display: none">scenenode</div>

The scene graph node for this object.

**Returns**:

* `result` ([niNode](../types/niNode.md))

***

### `script`
<div class="search_terms" style="display: none">script</div>

*Read-only*. Quick access to the base NPC's script.

**Returns**:

* `result` ([tes3script](../types/tes3script.md))

***

### `skills`
<div class="search_terms" style="display: none">skills</div>

Quick access to the base NPC's skills.

!!! note
	This array is 1-indexed. The array indices correspond to the [`tes3.skill`](https://mwse.github.io/MWSE/references/skills/) table plus 1 to account for Lua's 1-based array indexing. In other words `npc.skills[tes3.skill.armorer + 1]` returns the skill value corresponding to the Armorer skill.

**Returns**:

* `result` (number[])

***

### `soul`
<div class="search_terms" style="display: none">soul</div>

The soul value for this NPC's base object. This is typically `nil`, unless the `calcSouLValue` event provides one for the base actor.

**Returns**:

* `result` (number, nil)

***

### `sourceless`
<div class="search_terms" style="display: none">sourceless</div>

The sourceless flag of the object.

**Returns**:

* `result` (boolean)

***

### `sourceMod`
<div class="search_terms" style="display: none">sourcemod</div>

*Read-only*. The filename (including the extension) of the mod that owns this object. It has `nil` value if the object was anything other than loaded from an ESP or ESM file.

**Returns**:

* `result` (string)

***

### `spells`
<div class="search_terms" style="display: none">spells</div>

*Read-only*. Quick access to the NPC's spell list. It is a `tes3spellList`, which is a list wrapper with helper functions. The actual list is iterated over using `pairs`. E.g. `for _, spell in pairs(npc.spells) do print(spell.name) end`

**Returns**:

* `result` ([tes3spellList](../types/tes3spellList.md), [tes3spell](../types/tes3spell.md)[])

***

### `supportsActivate`
<div class="search_terms" style="display: none">supportsactivate</div>

If true, the object supports activation. This includes all the items (excluding non-carriable lights), actors outside combat, activators, containers and doors.

However, the activation of such an object may still be blocked via mwscript or a Lua script.

**Returns**:

* `result` (boolean)

***

### `supportsLuaData`
<div class="search_terms" style="display: none">supportsluadata</div>

If true, references of this object can store temporary or persistent lua data.

**Returns**:

* `result` (boolean)

***

### `weight`
<div class="search_terms" style="display: none">weight</div>

*Read-only*. Convenience access to the NPCs (race) weight.

**Returns**:

* `result` (number)

***

## Methods

### `__tojson`
<div class="search_terms" style="display: none">__tojson</div>

Serializes the object to json.

```lua
local string = myObject:__tojson()
```

**Returns**:

* `string` (string)

***

### `getEquipmentValue`
<div class="search_terms" style="display: none">getequipmentvalue, equipmentvalue</div>

Returns the combined value of all the items worn by the actor.

```lua
local value = myObject:getEquipmentValue({ useDurability = ... })
```

**Parameters**:

* `params` (table)
	* `useDurability` (boolean): *Default*: `false`. If true, damaged items will have a proportionally lower value.

**Returns**:

* `value` (number): The value of each equipped item added together.

***

### `hasItemEquipped`
<div class="search_terms" style="display: none">hasitemequipped, itemequipped</div>

Checks if the actor has provided item equipped.

```lua
local result = myObject:hasItemEquipped(item, itemData)
```

**Parameters**:

* `item` ([tes3item](../types/tes3item.md), string): The item to perform a check for.
* `itemData` ([tes3itemData](../types/tes3itemData.md)): *Optional*.

**Returns**:

* `result` (boolean)

***

### `offersService`
<div class="search_terms" style="display: none">offersservice</div>

Checks if the actor will offer a service in dialogue. This an offer and may still be refused by dialogue checks. To also get the result of dialogue checks, use [`tes3.checkMerchantOffersService()`](https://mwse.github.io/MWSE/apis/tes3/#tes3checkmerchantoffersservice).

```lua
local result = myObject:offersService(service)
```

**Parameters**:

* `service` ([tes3.merchantService](../references/merchant-services.md)): Use one of the values in the [`tes3.merchantService.*`](https://mwse.github.io/MWSE/references/merchant-services/) table.

**Returns**:

* `result` (boolean)

***

### `onInventoryClose`
<div class="search_terms" style="display: none">oninventoryclose</div>

A callback function invoked when an inventory is closed. Typically not used outside of specific purposes. You may find `tes3.reference`'s `onCloseInventory()` to be more convenient to use.

```lua
myObject:onInventoryClose(reference)
```

**Parameters**:

* `reference` ([tes3reference](../types/tes3reference.md))

***

### `reevaluateEquipment`
<div class="search_terms" style="display: none">reevaluateequipment</div>

Causes the NPC to reevaluate his/hers equipment choices and equip the best available. Then, the visible body parts will be updated.

```lua
myObject:reevaluateEquipment()
```

***

### `tradesItemType`
<div class="search_terms" style="display: none">tradesitemtype</div>

Checks if the actor will buy and sell items of a given object type. e.g. `actor:tradesItemType(tes3.objectType.repairItem)`

```lua
local result = myObject:tradesItemType(objectType)
```

**Parameters**:

* `objectType` ([tes3.objectType](../references/object-types.md)): Accepts values from [`tes3.objectType`](https://mwse.github.io/MWSE/references/object-types/) namespace.

**Returns**:

* `result` (boolean)

